{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Getting Started with SHELF\"\nauthor: \"Jeremy Oakley\"\ndate: \"`r Sys.Date()`\"\nfontsize: 12pt\noutput:\n  pdf_document:\n    number_sections: true\n    fig_caption: true\n    \nfig_caption: yes\nvignette: >\n  %\\VignetteIndexEntry{Getting Started with SHELF}\n  %\\VignetteEngine{knitr::rmarkdown}\n  %\\VignetteEncoding{UTF-8}\n---\n\n# Introduction\n\nWe illustrate the process of fitting a probabilty distribution to an expert's judgements, and obtaining feedback. \n\nVarious elicitation methods are suggested in SHELF, but they all involve either asking for probability or quantile judgements: the expert is either asked questions of the form, 'What is your probability $P(X\\le10)$?' or, 'Provide a value $x$ such that you think $P(X\\le x)=0.5.$'' Either way, we think of the expert as providing points on his/her cumulative distribution function (CDF). \n\nAs an example, suppose the uncertain quantity is the percentage $X$ of voters who will vote for a particular candidate in an upcoming leadership election. \n\n# Eliciting individual distributions from multiple experts\n\nSuppose we have two experts, who first consider their judgements independently. Expert A states $$P(X\\le25)=0.25, P(X\\le30)=0.5, P(X\\le35)=0.75,$$ and\nExpert B states $$P(X\\le30)=0.25, P(X\\le35)=0.5, P(X<50)=0.75.$$\n\n\n\nThe values of the quantiles are arranged in a matrix, with one column per expert\n```{r}\nv <- matrix(c(25, 30, 35, 30, 35, 50), nrow = 3, ncol = 2)\n```\n```{r, echo = F}\nv\n```\n\nThe probabilities should be arranged in matrix if they are different for the two experts (for example, if one expert had specified tertiles instead of lower and upper quartiles), otherwise they are stored in a vector\n\n```{r}\np <- c(0.25, 0.5, 0.75)\n```\n\nWe now fit probability distributions to these judgements with the `fitdist` command. Without specifying any limits (`lower` and `upper`), only normal and Student-$t$ distributions (with 3 degrees of freedom used as a default) will be fitted. Including a `lower` limit will result in log-normal, log Student-$t$ and gamma distributions also being fitted, and including both a `lower` and `upper` limit will result in a beta distribution fit, scaled to the interval [`lower`, `upper`].\n```{r}\nlibrary(SHELF)\nmyfit <- fitdist(vals = v, probs = p, lower = 0, upper = 100)\n```\n\nThe object `myfit` includes parameters of the fitted distributions for each expert, sums of squared errors (elicited - fitted probabilities) for each distribution and expert, and the original elicited judgements:\n```{r}\nnames(myfit)\n```\nFor example, the parameters of the fitted beta distributions are \n```{r}\nmyfit$Beta\n```\n\nInspecting `myfit$ssq` (sum of squared differences between elicited and fitted probabilities), we see that the normal distribution fits best for Expert 1, and the log Student-$t_3$ distribution fits best for Expert 2 (although the fit would probably be judged adequate for any the distributions, in this case). These best-fitting distributions are used as defaults in the `plotfit` function, and the `feedback` function when used with multiple experts\n\n```{r}\nmyfit$ssq\n```\n\nWe plot the fitted distributions, including a linear pool.\n```{r, fig.height = 4, fig.width = 5, fig.pos=\"h\", fig.align=\"center\", fig.cap = \"The two fitted distributions (normal for Expert 1 and log Student-$t_3$ for Expert 2) and an equal-weighted linear pool.\"}\nplotfit(myfit, lp = TRUE)\n```\n\n# Eliciting a single distribution from an individual or a group of experts\n\nNow we elicit a single a single 'consensus' distribution from the two experts.\nSuppose they agree $$P(X\\le 25)=0.25, P(X\\le30)=0.5, P(X\\le40)=0.75.$$\nWe fit a single set of distributions to these judgements.\n```{r}\nv <-c(25, 30, 40)\np <-c(0.25, 0.5, 0.75)\nconsensus <- fitdist(vals = v, probs = p, lower = 0, upper = 100)\n```\n\nThe best fitting distribution is the log Student-$t_3$ distribution, but the (scaled) beta distribution would likely be adequate at this stage, and we may choose to use the beta instead, given it has the appropriate bounds.\n\nWe plot the fitted density, and mark the \nfitted 5th and 95th percentiles\n```{r, fig.height = 4, fig.width = 5, fig.pos=\"h\", fig.align=\"center\", fig.cap = \"The fitted consensus distribution, with the lower and upper 5\\\\% tail areas shown as feedback.\"}\nplotfit(consensus, ql = 0.05, qu = 0.95, d = \"beta\")\n```\n\nWe can obtain values of fitted percentiles and probabilities with the `feedback` function. This will show fitted values for all the fitted distributions \n```{r}\nfeedback(consensus, quantiles = c(0.05, 0.95))\n```\nFor the fitted beta distribution, we have $P(X<15.2)=0.05$, and we can also compare, for example, the fitted probability $P(X<25)=0.283$ with elicited probability $P(X<25)=0.25$. ",
    "created" : 1475229253158.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1455298807",
    "id" : "84DCAE8F",
    "lastKnownWriteTime" : 1475229269,
    "last_content_update" : 1475229269083,
    "path" : "~/Dropbox/Research/R packages/SHELF/SHELF1.2.0.9001/vignettes/SHELF-overview.Rmd",
    "project_path" : "vignettes/SHELF-overview.Rmd",
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}